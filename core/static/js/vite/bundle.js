import{m as D,i as Kt,f as Qt,u as Zt,x as M,a as te,b as ee}from"./assets/vendor-DkkLgUrq.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();class ae{constructor(){this.currentRoute=window.location.pathname}async init(){const a=await(await fetch("/routes/?all=1")).json();this.routes=a}navigate(t,a){history.replaceState({html:document.getElementById("main-content").innerHTML},""),history.pushState(null,"",a||t),this.currentRoute=a||t,htmx.swap("#main-content",this.routes[t],{swapStyle:"innerHTML",transition:!0}),window.scrollTo({top:0,behavior:"smooth"}),It().hide()}}class se{constructor(t){this.router=t}dashboard(){this.router.navigate("/dashboard/"),Ft.currentType="weekly"}expenditures(){this.router.navigate("/all-expenditures/")}categories(){this.router.navigate("/categories/")}category(t){this.router.navigate("/categories/category-name/",`/categories/${t}/`),document.getElementById("pageHeading").textContent=t}viewWeek(t,a){t!=-1&&(U("week_id",t),this.router.navigate("viewWeekSkeleton",`/weeks/${t}/`),document.getElementById("pageHeading").textContent=`${a}`)}viewDay(t,a){U("date",t),U("seeDay","1"),this.router.navigate("seeDaySkeleton",`/days/${t}/`),document.getElementById("pageHeading").textContent=a}weeks(){this.router.navigate("/weeks/"),document.getElementById("pageHeading").textContent="Weeks"}}const h=new ae,$t=new se(h);h.init();window.routes=$t;let X={};const U=(e,t)=>{X[e]=t};async function tt(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){console.log("Error fetching data ",t)}}class re{constructor(){this.subscribers=[]}async fetchLatest(){const t=await tt("/api/categories/");this.notifySubscribers(t)}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(a=>a!=t)}notifySubscribers(t){this.subscribers.forEach(a=>{a.update(t)})}}const $=new re,It=(()=>{let e;return()=>e||(e=window.FlowbiteInstances._instances.Drawer["separator-sidebar"],e)})();function oe(e){return window.FlowbiteInstances._instances.Dropdown[e]}function ne(){return decodeURIComponent(window.location.pathname.split("/").filter(e=>e!=="").pop())}function ie(){const e={...X};return X={},/^\/categories\/[^\/]+\/$/.test(h.currentRoute)?{categoryName:ne(),oneCategory:1,...e}:e}class de{constructor(){this.currentType="weekly"}fetch(t){t!=this.currentType&&(this.currentType=t,document.getElementById("statSummary").outerHTML=h.routes["/statSummarySkeleton/"],htmx.ajax("GET","/components/statSummary/?type="+t,{target:"#statSummarySkeleton",swap:"outerHTML"}))}}const Ft=new de;window.getAdditionalParams=ie;window.statSummary=Ft;window.getDropdown=oe;(function(){let e;document.addEventListener("alpine:init",()=>{D.data("toast",()=>({open:!0,autoDismiss:e,show(){this.autoDismiss&&setTimeout(()=>{this.open=!1},2e3)}}))})})();class ce{constructor(){this.instances={}}getInstance(t){return this.instances[t]}setInstance(t,a){this.instances[t]=a}}const j=new ce;class le{constructor(){this.instances={}}getInstance(t){return this.instances[t]}setInstance(t,a){this.instances[t]=a}}const et=new le;(function(){document.addEventListener("alpine:init",()=>{D.data("themeToggler",()=>({dark:localStorage.getItem("dark")=="true",toggle(){this.dark=!this.dark,document.documentElement.classList.toggle("dark",this.dark),localStorage.setItem("dark",this.dark?"true":"false"),document.documentElement.setAttribute("data-theme",this.dark?"dark":"light")}}))})})();class ue{constructor(){this.modals={},this.currentlyOpenModal=null}createModal(t,a){this.modals[t]=a}getModal(t){return this.modals[t]}}const A=new ue;class b{constructor(t){this.modal=A.getModal(t)}open(){this.modal.open()}close(){this.modal.close()}}class he extends b{_showPageSkeleton(t){return/^\/categories\/[^\/]+\/$/.test(t)?document.getElementById("see-products").outerHTML=h.routes.seeProductsSkeleton:!(t in h.routes)||t=="/search/"?this._navigateToDashboard():document.getElementById("main-content").innerHTML=h.routes[t]}_getHTMXTarget(t){return/^\/categories\/[^\/]+\/$/.test(t)?"#see-products":t=="/all-expenditures/"?"#all-expenditures":"#main-content"}_navigateToDashboard(){document.getElementById("main-content").innerHTML=h.routes["/dashboard/"],history.pushState(null,"","/dashboard/"),h.currentRoute="/dashboard/"}_resetFormUI(t){t.reset(),j.getInstance("categories-add-product").select(j.getInstance("categories-add-product").none),et.getInstance("add-product-date").setToday()}_submitProductForm(t,a){const s=htmx.values(t);htmx.ajax("POST","/implementations/dashboard/",{values:s,target:a}).then(()=>{$.fetchLatest()})}submitForm(){const t=document.getElementById("add-product-form");if(t.checkValidity()){const a=window.location.pathname,s=this._getHTMXTarget(a);this._showPageSkeleton(a),this.close(),this._submitProductForm(t,s),this._resetFormUI(t)}else t.reportValidity()}}class pe extends b{submitForm(){const t=document.getElementById("add-category-form");if(t.checkValidity()){document.getElementById("main-content").innerHTML=h.routes[h.currentRoute],this.close();const a=htmx.values(t);htmx.ajax("POST","/implementations/categories/",{values:a,target:"#main-content"}).then(()=>{$.fetchLatest()}),t.reset()}else t.reportValidity()}}class me extends b{constructor(t,a){super(t),this.ff=a}setDetails(t){const a=JSON.parse(t),s=this.ff.formFields;s.name.value=a.name,s.description.value=a.description?a.description:"",s.id.value=a.id.toString(),this.open()}submitForm(){const t=document.getElementById("edit-category-form");if(t.checkValidity()){document.getElementById("main-content").innerHTML=h.routes[h.currentRoute],this.close();const a=htmx.values(t);htmx.ajax("POST","/implementations/categories/?edit=1",{values:a,target:"#main-content"}).then(()=>{$.fetchLatest()}),t.reset()}else t.reportValidity()}}class ge extends b{constructor(t,a,s){super(t),this.df=a,this.ff=s}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields,r=this.ff.formFields;s.name.textContent=a.name,r.id.value=a.id.toString(),this.open()}submitForm(){const t=document.getElementById("delete-category-form");document.getElementById("main-content").innerHTML=h.routes[h.currentRoute];const a=htmx.values(t);this.close(),htmx.ajax("POST","/implementations/categories/?delete=1",{values:a,target:"#main-content"}).then(()=>{$.fetchLatest()})}}class J{constructor(){this.dataFields={}}setDataField(t,a){this.dataFields[t]=a}}class V{constructor(){this.formFields={}}setFormField(t,a){this.formFields[t]=a}}class fe extends b{constructor(t,a){super(t),this.df=a}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields;s.name.textContent=a.name,s.price.textContent=`GHS ${a.price.toFixed(2)}`,s.category.textContent=a.category?a.category.name:"None",s.description.textContent=a.description||"No description",this.open()}}class ve extends b{constructor(t,a,s){super(t),this.df=a,this.ff=s}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields,r=this.ff.formFields;s.name.textContent=a.name,s.price.textContent=`GHS ${a.price.toFixed(2)}`,s.category.textContent=a.category?a.category.name:"None",s.description.textContent=a.description||"No description",r.id.value=a.id.toString(),r.date.value=a.date,this.open()}submitForm(){const t=document.getElementById("delete-product-form"),a=htmx.values(t),s=htmx.find(`#product-${a.id}`),r=htmx.closest(s,".record");r.querySelector(".skeleton").classList.remove("hidden"),this.close(),htmx.ajax("POST","/implementations/dashboard/?delete=1",{values:a,target:r,swap:"outerHTML"})}}class ye extends b{constructor(t,a){super(t),this.ff=a}setDetails(t){const a=JSON.parse(t),s=this.ff.formFields,r=a.price.toString().split(".");s.name.value=a.name,s.cedis.value=r[0],console.log(r),a.category&&(s.category.value=a.category.id.toString()),r.length==2?s.pesewas.value=r[1].length==2?r[1]:r[1]+"0":s.pesewas.value="00",s.id.value=a.id.toString(),s.description.value=a.description,s.date.value=a.date,this.setCategory(a.category),et.getInstance("edit-product-date").setDate(a.date),this.open()}setCategory(t){const a=j.getInstance("categories-edit-product");t?a.select(t):a.select({id:null,name:"None"})}submitForm(){const t=document.getElementById("edit-product-form");if(t.checkValidity()){const a=htmx.values(t),s=htmx.find(`#product-${a.id}`),r=htmx.closest(s,".record");r.querySelector(".skeleton").classList.remove("hidden"),this.close(),htmx.ajax("POST","/implementations/dashboard/?edit=1",{values:a,target:r,swap:"outerHTML"}).then(()=>{$.fetchLatest()})}else t.reportValidity()}}class we extends b{constructor(t,a){super(t),this.df=a}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields;s.name.textContent=a.name,s.product_count.textContent=a.product_count.toString(),s.description.textContent=a.description||"No description",this.open()}}class _e extends b{constructor(t,a){super(t),this.ff=a}async submitForm(){const t=document.getElementById("search-form");if(t.checkValidity()){this.close(),h.navigate("/search/");const a=htmx.values(t);htmx.ajax("GET","/components/search/",{values:a,target:"#main-content"}),t.reset()}else t.reportValidity()}}const ke=(()=>{let e;return()=>{if(e)return e;const t=new V;return e=new _e("search-modal",t),e}})(),be=(()=>{let e;return()=>e||(e=new he("add-product-modal"),e)})(),xe=(()=>{let e;return()=>e||(e=new pe("add-category-modal"),e)})(),Se=(()=>{let e;return()=>{if(e)return e;const t=new J,a=new V;return e=new ve("delete-product-modal",t,a),e}})(),Me=(()=>{let e;return()=>{if(e)return e;const t=new J;return e=new fe("show-details-modal",t),e}})(),Ce=(()=>{let e;return()=>{if(e)return e;const t=new V;return e=new ye("edit-product-modal",t),e}})(),De=(()=>{let e;return()=>{if(e)return e;const t=new J;return e=new we("category-details-modal",t),e}})(),Oe=(()=>{let e;return()=>{if(e)return e;const t=new J,a=new V;return e=new ge("delete-category-modal",t,a),e}})(),Ee=(()=>{let e;return()=>{if(e)return e;const t=new V;return e=new me("edit-category-modal",t),e}})();function at(){localStorage.getItem("modalOpen")?(localStorage.removeItem("modalOpen"),localStorage.setItem("forwarded","true"),history.forward()):localStorage.getItem("forwarded")&&A.currentlyOpenModal.close()}window.getAddProductModal=be;window.getDeleteProductModal=Se;window.getShowDetailsModal=Me;window.getEditProductModal=Ce;window.getCategoryDetailsModal=De;window.getAddCategoryModal=xe;window.getDeleteCategoryModal=Oe;window.getEditCategoryModal=Ee;window.getSearchModal=ke;window.handleCloseModal=at;window.modalManager=A;class st extends Kt{createRenderRoot(){return this}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rt=e=>(t,a)=>{a!==void 0?a.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $e={attribute:!0,type:String,converter:Zt,reflect:!1,hasChanged:Qt},Ie=(e=$e,t,a)=>{const{kind:s,metadata:r}=a;let n=globalThis.litPropertyMetadata.get(r);if(n===void 0&&globalThis.litPropertyMetadata.set(r,n=new Map),s==="setter"&&((e=Object.create(e)).wrapped=!0),n.set(a.name,e),s==="accessor"){const{name:c}=a;return{set(i){const m=t.get.call(this);t.set.call(this,i),this.requestUpdate(c,m,e)},init(i){return i!==void 0&&this.C(c,void 0,e,i),i}}}if(s==="setter"){const{name:c}=a;return function(i){const m=this[c];t.call(this,i),this.requestUpdate(c,m,e)}}throw Error("Unsupported decorator location: "+s)};function W(e){return(t,a)=>typeof a=="object"?Ie(e,t,a):((s,r,n)=>{const c=r.hasOwnProperty(n);return r.constructor.createProperty(n,s),c?Object.getOwnPropertyDescriptor(r,n):void 0})(e,t,a)}var Fe=Object.create,ot=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,Tt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),I=e=>{throw TypeError(e)},Pe=(e,t,a)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,wt=(e,t)=>ot(e,"name",{value:t,configurable:!0}),Le=e=>[,,,Fe(e?.[Tt("metadata")]??null)],Pt=["class","method","getter","setter","accessor","field","value","get","set"],L=e=>e!==void 0&&typeof e!="function"?I("Function expected"):e,Be=(e,t,a,s,r)=>({kind:Pt[e],name:t,metadata:s,addInitializer:n=>a._?I("Already initialized"):r.push(L(n||null))}),He=(e,t)=>Pe(t,Tt("metadata"),e[3]),B=(e,t,a,s)=>{for(var r=0,n=e[t>>1],c=n&&n.length;r<c;r++)t&1?n[r].call(a):s=n[r].call(a,s);return s},nt=(e,t,a,s,r,n)=>{var c,i,m,p,g,o=t&7,f=!!(t&8),u=!!(t&16),v=o>3?e.length+1:o?f?1:2:0,x=Pt[o+5],S=o>3&&(e[v-1]=[]),P=e[v]||(e[v]=[]),l=o&&(!u&&!f&&(r=r.prototype),o<5&&(o>3||!u)&&Te(o<4?r:{get[a](){return _t(this,n)},set[a](d){return bt(this,n,d)}},a));o?u&&o<4&&wt(n,(o>2?"set ":o>1?"get ":"")+a):wt(r,a);for(var y=s.length-1;y>=0;y--)p=Be(o,a,m={},e[3],P),o&&(p.static=f,p.private=u,g=p.access={has:u?d=>Ne(r,d):d=>a in d},o^3&&(g.get=u?d=>(o^1?_t:ze)(d,r,o^4?n:l.get):d=>d[a]),o>2&&(g.set=u?(d,w)=>bt(d,r,w,o^4?n:l.set):(d,w)=>d[a]=w)),i=(0,s[y])(o?o<4?u?n:l[x]:o>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,o^4||i===void 0?L(i)&&(o>4?S.unshift(i):o?u?n=i:l[x]=i:r=i):typeof i!="object"||i===null?I("Object expected"):(L(c=i.get)&&(l.get=c),L(c=i.set)&&(l.set=c),L(c=i.init)&&S.unshift(c));return o||He(e,r),l&&ot(r,a,l),u?o^4?n:l:r},it=(e,t,a)=>t.has(e)||I("Cannot "+a),Ne=(e,t)=>Object(t)!==t?I('Cannot use the "in" operator on this value'):e.has(t),_t=(e,t,a)=>(it(e,t,"read from private field"),a?a.call(e):t.get(e)),kt=(e,t,a)=>t.has(e)?I("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),bt=(e,t,a,s)=>(it(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),ze=(e,t,a)=>(it(e,t,"access private method"),a),Lt,Bt,Y,Ht,_,dt,ct;const O={data:void 0,useCachedData:!1};Ht=[rt("weeks-records")];class R extends(Y=st,Bt=[W({type:Array})],Lt=[W({type:Boolean})],Y){constructor(){super(...arguments),kt(this,dt,B(_,8,this,[])),B(_,11,this),kt(this,ct,B(_,12,this,!1)),B(_,15,this)}async fetchData(){if(O.useCachedData&&O.data)this.data=O.data,O.useCachedData=!1;else{const a=await(await fetch("/api/weekly-spendings/")).json();this.data=a,O.data=this.data}this.ready=!0}populateData(t){return t.map(s=>M`
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200 link" 
                @click=${()=>$t.viewWeek(s.id,`${s.week_start} - ${s.week_end}`)}                
                >    
                ${s.week_start} - ${s.week_end}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">
                    GHS ${s.total_amount}
                </td>
            </tr>
        `)}skeletonRows(t){const a=[];for(let s=0;s<t;s++)a.push(M`
                <tr>
                   <td class="px-6 py-4">
                      <div class="h-4 w-32 record-skeleton"></div>
                    </td>
                   <td class="px-6 py-4">
                      <div class="h-4 w-12 record-skeleton"></div>
                    </td>
                </tr>
            `);return a}connectedCallback(){super.connectedCallback(),this.fetchData()}render(){return M`
        <div class="p-4 bg-gray-50 dark:bg-dark2 dark:border-darkborder rounded-md border relative record">
            <h3 class="p-2  tracking-tight border-b dark:border-darkborder text-gray-900 dark:text-gray-300">
            <div class="flex items-center justify-between">
                <div class="text-xl font-bold">
                <!-- {{date|timesince}} -->
                </div>
            </div>   
            <div class="text-sm text-gray-500 dark:text-gray-400 font-medium my-2">
                <!-- {{ date | dateOnly}} -->
            </div>
            </h3>
        
    <div class="flex flex-col">
        <div class="-m-1.5 overflow-x-auto">
          <div class="p-1.5 min-w-full inline-block align-middle">
            <div class="overflow-hidden">
              <table class="min-w-full divide-y dark:divide-gray-100/5">
                <thead>
                  <tr>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Week</th>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Total</th>
                  </tr>
                </thead>
                <tbody class="divide-y dark:divide-gray-100/5">
                    ${this.ready?M`${this.populateData(this.data)}`:M`${this.skeletonRows(5)}`}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
 </div>
        `}}_=Le(Y);dt=new WeakMap;ct=new WeakMap;nt(_,4,"data",Bt,R,dt);nt(_,4,"ready",Lt,R,ct);R=nt(_,0,"WeeksRecords",Ht,R);B(_,1,R);/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=([e,t,a])=>{const s=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach(r=>{s.setAttribute(r,String(t[r]))}),a?.length&&a.forEach(r=>{const n=Nt(r);s.appendChild(n)}),s},We=(e,t={})=>{const a="svg",s={...Ae,...t};return Nt([a,s,e])};/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];var Ge=Object.create,lt=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,zt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),F=e=>{throw TypeError(e)},je=(e,t,a)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,xt=(e,t)=>lt(e,"name",{value:t,configurable:!0}),qe=e=>[,,,Ge(e?.[zt("metadata")]??null)],At=["class","method","getter","setter","accessor","field","value","get","set"],H=e=>e!==void 0&&typeof e!="function"?F("Function expected"):e,Je=(e,t,a,s,r)=>({kind:At[e],name:t,metadata:s,addInitializer:n=>a._?F("Already initialized"):r.push(H(n||null))}),Ue=(e,t)=>je(t,zt("metadata"),e[3]),N=(e,t,a,s)=>{for(var r=0,n=e[t>>1],c=n&&n.length;r<c;r++)t&1?n[r].call(a):s=n[r].call(a,s);return s},ut=(e,t,a,s,r,n)=>{var c,i,m,p,g,o=t&7,f=!!(t&8),u=!!(t&16),v=o>3?e.length+1:o?f?1:2:0,x=At[o+5],S=o>3&&(e[v-1]=[]),P=e[v]||(e[v]=[]),l=o&&(!u&&!f&&(r=r.prototype),o<5&&(o>3||!u)&&Ve(o<4?r:{get[a](){return St(this,n)},set[a](d){return Ct(this,n,d)}},a));o?u&&o<4&&xt(n,(o>2?"set ":o>1?"get ":"")+a):xt(r,a);for(var y=s.length-1;y>=0;y--)p=Je(o,a,m={},e[3],P),o&&(p.static=f,p.private=u,g=p.access={has:u?d=>Xe(r,d):d=>a in d},o^3&&(g.get=u?d=>(o^1?St:Ye)(d,r,o^4?n:l.get):d=>d[a]),o>2&&(g.set=u?(d,w)=>Ct(d,r,w,o^4?n:l.set):(d,w)=>d[a]=w)),i=(0,s[y])(o?o<4?u?n:l[x]:o>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,o^4||i===void 0?H(i)&&(o>4?S.unshift(i):o?u?n=i:l[x]=i:r=i):typeof i!="object"||i===null?F("Object expected"):(H(c=i.get)&&(l.get=c),H(c=i.set)&&(l.set=c),H(c=i.init)&&S.unshift(c));return o||Ue(e,r),l&&lt(r,a,l),u?o^4?n:l:r},ht=(e,t,a)=>t.has(e)||F("Cannot "+a),Xe=(e,t)=>Object(t)!==t?F('Cannot use the "in" operator on this value'):e.has(t),St=(e,t,a)=>(ht(e,t,"read from private field"),a?a.call(e):t.get(e)),Mt=(e,t,a)=>t.has(e)?F("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Ct=(e,t,a,s)=>(ht(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),Ye=(e,t,a)=>(ht(e,t,"access private method"),a),Wt,Rt,K,Gt,k,pt,mt;const C={data:void 0,useCachedData:!1};Gt=[rt("weeks-chart")];class G extends(K=st,Rt=[W({type:Array})],Wt=[W({type:Boolean})],K){constructor(){super(...arguments),Mt(this,pt,N(k,8,this,[])),N(k,11,this),Mt(this,mt,N(k,12,this,!1)),N(k,15,this),this.chart=null,this.observer=null}tooltipFormatter(t,{dataPointIndex:a}){return this.data.map(r=>`${r.week_start} - ${r.week_end}`)[a]}getToolTipOptions(){return{theme:this.getisDark()?"dark":"light",style:{fontFamily:"Poppins-Regular"},x:{formatter:this.tooltipFormatter.bind(this)}}}getLabelsStyleOptions(){return{colors:this.getisDark()?"#9ca3af":"#1f2937",fontFamily:"Poppins-Regular"}}getGridOptions(){return{borderColor:this.getisDark()?"#f3f4f60d":"#e5e7eb"}}getisDark(){return document.documentElement.classList.contains("dark")}getXaxisOptions(){return{labels:{style:this.getLabelsStyleOptions()},axisBorder:{color:this.getisDark()?"#f3f4f60d":"#e5e7eb"},axisTicks:{color:this.getisDark()?"#f3f4f60d":"#e5e7eb"}}}getYaxisOptions(){return{labels:{style:this.getLabelsStyleOptions()}}}renderChart(){const t={chart:{type:"line",toolbar:{show:!1},zoom:{enabled:!1}},grid:this.getGridOptions(),stroke:{curve:"smooth",width:1},series:[{name:"Weekly Spendings",data:this.data.map(s=>s.total_amount)}],xaxis:this.getXaxisOptions(),yaxis:this.getYaxisOptions(),tooltip:this.getToolTipOptions()},a=this.querySelector("#chart");a&&(this.chart=new te(a,t),this.chart.render())}updateColors(){this.chart&&this.chart.updateOptions({xaxis:this.getXaxisOptions(),yaxis:this.getYaxisOptions(),tooltip:this.getToolTipOptions(),grid:this.getGridOptions()})}async fetchData(){if(console.log("Fetching data for weeks chart"),console.log(C),C.useCachedData&&C.data)this.data=C.data,C.useCachedData=!1;else{const t=await tt("/api/weekly-spendings/?limit=10");this.data=t.sort((a,s)=>new Date(a.week_start).getTime()-new Date(s.week_start).getTime()),C.data=this.data}this.chart.updateSeries([{name:"Weekly Spendings",data:this.data.map(t=>t.total_amount)}]),this.ready=!0}firstUpdated(){console.log("First updated called"),this.ready=!1,this.renderChart(),this.fetchData(),this.observer=new MutationObserver(()=>{this.updateColors()}),this.observer.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}connectedCallback(){super.connectedCallback(),console.log("Connected callback called")}disconnectedCallback(){super.disconnectedCallback(),this.observer&&this.observer.disconnect(),this.chart&&this.chart.destroy()}render(){return We(Re,{color:"#888",size:40,class:"lucide lucide-loader animate-spin"}).outerHTML,M`
    <div style="position:relative;">
        ${this.ready?null:M`
          <div style="
            position:absolute;
            inset:0;
            display:flex;
            align-items:center;
            justify-content:center;
            z-index:10;
          ">
            ${ee`
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="#888" size="40" class="lucide lucide-loader animate-spin stroke-blue-500"><path d="M12 2v4"></path><path d="m16.2 7.8 2.9-2.9"></path><path d="M18 12h4"></path><path d="m16.2 16.2 2.9 2.9"></path><path d="M12 18v4"></path><path d="m4.9 19.1 2.9-2.9"></path><path d="M2 12h4"></path><path d="m4.9 4.9 2.9 2.9"></path></svg>
                `}
          </div>
        `}
        <div id="chart"></div>
    </div>
    `}}k=qe(K);pt=new WeakMap;mt=new WeakMap;ut(k,4,"data",Rt,G,pt);ut(k,4,"ready",Wt,G,mt);G=ut(k,0,"WeeksChart",Gt,G);N(k,1,G);function Ke(e){return{isOpen:!1,init(){A.createModal(e,this)},open(){this.isOpen=!0,this.toggleSideEffects(!this.isOpen),history.pushState(null,""),localStorage.setItem("modalOpen","true"),A.currentlyOpenModal=this},close(){this.isOpen=!1,this.toggleSideEffects(!this.isOpen),localStorage.removeItem("modalOpen"),localStorage.removeItem("forwarded")},toggleSideEffects(t){const a=document.getElementById("animated-backdrop"),s=document.body;a.classList.toggle("hidden",t),s.classList.toggle("overflow-hidden",!t)},handleClickOutside(t){t.target==t.currentTarget&&this.close()}}}function Qe(e){return{isOpen:!1,filtered:[],items:[],isFocused:!1,selected:{},submitProperty:"",newSearch:"",newCategory:{},none:{id:null,name:"None"},async init(){j.setInstance(e,this),$.subscribe(this);const t=await tt("/api/categories/");this.update(t),this.selected=this.none},update(t){this.items=[this.none,...t],this.filtered=[...this.items]},open(){this.isOpen=!0,this.isFocused=!0},close(){this.isOpen=!1,this.selected={...this.selected},this.filtered=[...this.items],this.isFocused=!1},filter(t){this.filtered=this.items.filter(a=>a.name.toLowerCase().includes(t.currentTarget.value.toLowerCase())),this.filtered.length==0&&(this.newSearch=t.currentTarget.value)},select(t){this.selected=t,this.isOpen=!1,this.filtered=[...this.items]}}}function Ze(e){return{calendar:void 0,field:void 0,options:{inputMode:!0,positionToInput:"center",styles:{calendar:"calendar",dateBtn:"vc-date__btn date-btn",date:"vc-date",month:"",year:"",yearsYear:"vc-years__year",monthsMonth:"vc-months__month"},onClickDate(t,a){const s=t.context.selectedDates[0];if(s){document.getElementById(e+"-value").value=s;const r=new Date(s);document.getElementById(e).value=r.toDateString()}}},init(){et.setInstance(e,this);const{Calendar:t}=window.VanillaCalendarPro;this.field=document.getElementById(e),this.calendar=new t(this.field,this.options),this.calendar.init(),this.setToday()},setDate(t){const a=new Date(t);this.field.value=a.toDateString();const s=a.toISOString().split("T")[0];document.getElementById(e+"-value").value=s,this.calendar.update()},setToday(){const t=new Date,a=t.toDateString();this.field.value=a,document.getElementById(e+"-value").value=t.toISOString().split("T")[0]}}}function Vt(){D.data("baseModal",Ke),D.data("selectField",Qe),D.data("datePicker",Ze)}function gt(){It().hide(),window.initFlowbite()}function jt(e){const t=window.location.pathname;e.state&&t in h.routes&&(t=="/weeks/"?(O.useCachedData=!0,document.getElementById("main-content").innerHTML=h.routes["/weeks/"],document.getElementById("pageHeading").textContent="Weeks"):(t=="/dashboard/"&&(C.useCachedData=!0),document.getElementById("main-content").innerHTML=e.state.html)),gt()}document.addEventListener("htmx:afterSettle",gt);document.addEventListener("alpine:init",Vt);window.addEventListener("popstate",at);window.addEventListener("popstate",jt);window.addEventListener("beforeunload",()=>{document.removeEventListener("alpine:init",Vt),window.removeEventListener("popstate",at),window.removeEventListener("popstate",jt),document.addEventListener("htmx:afterSettle",gt)});var ta=Object.create,ft=Object.defineProperty,ea=Object.getOwnPropertyDescriptor,qt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),T=e=>{throw TypeError(e)},aa=(e,t,a)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Dt=(e,t)=>ft(e,"name",{value:t,configurable:!0}),sa=e=>[,,,ta(e?.[qt("metadata")]??null)],Jt=["class","method","getter","setter","accessor","field","value","get","set"],z=e=>e!==void 0&&typeof e!="function"?T("Function expected"):e,ra=(e,t,a,s,r)=>({kind:Jt[e],name:t,metadata:s,addInitializer:n=>a._?T("Already initialized"):r.push(z(n||null))}),oa=(e,t)=>aa(t,qt("metadata"),e[3]),Q=(e,t,a,s)=>{for(var r=0,n=e[t>>1],c=n&&n.length;r<c;r++)t&1?n[r].call(a):s=n[r].call(a,s);return s},Ut=(e,t,a,s,r,n)=>{var c,i,m,p,g,o=t&7,f=!!(t&8),u=!!(t&16),v=o>3?e.length+1:o?f?1:2:0,x=Jt[o+5],S=o>3&&(e[v-1]=[]),P=e[v]||(e[v]=[]),l=o&&(!u&&!f&&(r=r.prototype),o<5&&(o>3||!u)&&ea(o<4?r:{get[a](){return Ot(this,n)},set[a](d){return Et(this,n,d)}},a));o?u&&o<4&&Dt(n,(o>2?"set ":o>1?"get ":"")+a):Dt(r,a);for(var y=s.length-1;y>=0;y--)p=ra(o,a,m={},e[3],P),o&&(p.static=f,p.private=u,g=p.access={has:u?d=>na(r,d):d=>a in d},o^3&&(g.get=u?d=>(o^1?Ot:da)(d,r,o^4?n:l.get):d=>d[a]),o>2&&(g.set=u?(d,w)=>Et(d,r,w,o^4?n:l.set):(d,w)=>d[a]=w)),i=(0,s[y])(o?o<4?u?n:l[x]:o>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,o^4||i===void 0?z(i)&&(o>4?S.unshift(i):o?u?n=i:l[x]=i:r=i):typeof i!="object"||i===null?T("Object expected"):(z(c=i.get)&&(l.get=c),z(c=i.set)&&(l.set=c),z(c=i.init)&&S.unshift(c));return o||oa(e,r),l&&ft(r,a,l),u?o^4?n:l:r},vt=(e,t,a)=>t.has(e)||T("Cannot "+a),na=(e,t)=>Object(t)!==t?T('Cannot use the "in" operator on this value'):e.has(t),Ot=(e,t,a)=>(vt(e,t,"read from private field"),a?a.call(e):t.get(e)),ia=(e,t,a)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Et=(e,t,a,s)=>(vt(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),da=(e,t,a)=>(vt(e,t,"access private method"),a),Xt,Z,Yt,E,yt;Yt=[rt("my-button")];class q extends(Z=st,Xt=[W({type:String})],Z){constructor(){super(...arguments),ia(this,yt,Q(E,8,this,"Click Me")),Q(E,11,this)}render(){return M`<button><slot>${this.label}</slot></button>`}}E=sa(Z);yt=new WeakMap;Ut(E,4,"label",Xt,q,yt);q=Ut(E,0,"MyButton",Yt,q);Q(E,1,q);window.Alpine=D;document.addEventListener("DOMContentLoaded",()=>{D.start()});
