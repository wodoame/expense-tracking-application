import{m as C,i as Qt,f as Yt,u as Zt,x as M,a as te,b as ee}from"./assets/vendor-DkkLgUrq.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();class ae{constructor(){this.currentRoute=window.location.pathname}async init(){const a=await(await fetch("/routes/?all=1")).json();this.routes=a}navigate(t,a){history.replaceState({html:document.getElementById("main-content").innerHTML},""),history.pushState(null,"",a||t),this.currentRoute=a||t,htmx.swap("#main-content",this.routes[t],{swapStyle:"innerHTML",transition:!0}),window.scrollTo({top:0,behavior:"smooth"}),It().hide()}}class se{constructor(t){this.router=t}dashboard(){this.router.navigate("/dashboard/"),Pt.currentType="weekly"}expenditures(){this.router.navigate("/all-expenditures/")}categories(){this.router.navigate("/categories/")}category(t){this.router.navigate("/categories/category-name/",`/categories/${t}/`),document.getElementById("pageHeading").textContent=t}viewWeek(t,a){t!=-1&&(U("week_id",t),this.router.navigate("viewWeekSkeleton",`/weeks/${t}/`),document.getElementById("pageHeading").textContent=`${a}`)}viewDay(t,a){U("date",t),U("seeDay","1"),this.router.navigate("seeDaySkeleton",`/days/${t}/`),document.getElementById("pageHeading").textContent=a}weeks(){this.router.navigate("/weeks/"),document.getElementById("pageHeading").textContent="Weeks"}}const h=new ae,$t=new se(h);h.init();window.routes=$t;let X={};const U=(e,t)=>{X[e]=t};async function tt(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){console.log("Error fetching data ",t)}}class re{constructor(){this.subscribers=[]}async fetchLatest(){const t=await tt("/api/categories/");this.notifySubscribers(t)}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(a=>a!=t)}notifySubscribers(t){this.subscribers.forEach(a=>{a.update(t)})}}const $=new re,It=(()=>{let e;return()=>e||(e=window.FlowbiteInstances._instances.Drawer["separator-sidebar"],e)})();function ne(e){return window.FlowbiteInstances._instances.Dropdown[e]}function oe(){return decodeURIComponent(window.location.pathname.split("/").filter(e=>e!=="").pop())}function ie(){const e={...X};return X={},/^\/categories\/[^\/]+\/$/.test(h.currentRoute)?{categoryName:oe(),oneCategory:1,...e}:e}class de{constructor(){this.currentType="weekly"}fetch(t){t!=this.currentType&&(this.currentType=t,document.getElementById("statSummary").outerHTML=h.routes["/statSummarySkeleton/"],htmx.ajax("GET","/components/statSummary/?type="+t,{target:"#statSummarySkeleton",swap:"outerHTML"}))}}const Pt=new de;window.getAdditionalParams=ie;window.statSummary=Pt;window.getDropdown=ne;(function(){let e;document.addEventListener("alpine:init",()=>{C.data("toast",()=>({open:!0,autoDismiss:e,show(){this.autoDismiss&&setTimeout(()=>{this.open=!1},2e3)}}))})})();class ce{constructor(){this.instances={}}getInstance(t){return this.instances[t]}setInstance(t,a){this.instances[t]=a}}const G=new ce;class le{constructor(){this.instances={}}getInstance(t){return this.instances[t]}setInstance(t,a){this.instances[t]=a}}const et=new le;(function(){document.addEventListener("alpine:init",()=>{C.data("themeToggler",()=>({dark:localStorage.getItem("dark")=="true",toggle(){this.dark=!this.dark,document.documentElement.classList.toggle("dark",this.dark),localStorage.setItem("dark",this.dark?"true":"false"),document.documentElement.setAttribute("data-theme",this.dark?"dark":"light")}}))})})();class ue{constructor(){this.modals={},this.currentlyOpenModal=null}createModal(t,a){this.modals[t]=a}getModal(t){return this.modals[t]}}const A=new ue;class S{constructor(t){this.modal=A.getModal(t)}open(){this.modal.open()}close(){this.modal.close()}}class he extends S{_showPageSkeleton(t){return/^\/categories\/[^\/]+\/$/.test(t)?document.getElementById("see-products").outerHTML=h.routes.seeProductsSkeleton:!(t in h.routes)||t=="/search/"?this._navigateToDashboard():document.getElementById("main-content").innerHTML=h.routes[t]}_getHTMXTarget(t){return/^\/categories\/[^\/]+\/$/.test(t)?"#see-products":t=="/all-expenditures/"?"#all-expenditures":"#main-content"}_navigateToDashboard(){document.getElementById("main-content").innerHTML=h.routes["/dashboard/"],history.pushState(null,"","/dashboard/"),h.currentRoute="/dashboard/"}_resetFormUI(t){t.reset(),G.getInstance("categories-add-product").select(G.getInstance("categories-add-product").none),et.getInstance("add-product-date").setToday()}_submitProductForm(t,a){const s=htmx.values(t);htmx.ajax("POST","/implementations/dashboard/",{values:s,target:a}).then(()=>{$.fetchLatest()})}submitForm(){const t=document.getElementById("add-product-form");if(t.checkValidity()){const a=window.location.pathname,s=this._getHTMXTarget(a);this._showPageSkeleton(a),this.close(),this._submitProductForm(t,s),this._resetFormUI(t)}else t.reportValidity()}}class pe extends S{submitForm(){const t=document.getElementById("add-category-form");if(t.checkValidity()){document.getElementById("main-content").innerHTML=h.routes[h.currentRoute],this.close();const a=htmx.values(t);htmx.ajax("POST","/implementations/categories/",{values:a,target:"#main-content"}).then(()=>{$.fetchLatest()}),t.reset()}else t.reportValidity()}}class me extends S{constructor(t,a){super(t),this.ff=a}setDetails(t){const a=JSON.parse(t),s=this.ff.formFields;s.name.value=a.name,s.description.value=a.description?a.description:"",s.id.value=a.id.toString(),this.open()}submitForm(){const t=document.getElementById("edit-category-form");if(t.checkValidity()){document.getElementById("main-content").innerHTML=h.routes[h.currentRoute],this.close();const a=htmx.values(t);htmx.ajax("POST","/implementations/categories/?edit=1",{values:a,target:"#main-content"}).then(()=>{$.fetchLatest()}),t.reset()}else t.reportValidity()}}class fe extends S{constructor(t,a,s){super(t),this.df=a,this.ff=s}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields,r=this.ff.formFields;s.name.textContent=a.name,r.id.value=a.id.toString(),this.open()}submitForm(){const t=document.getElementById("delete-category-form");document.getElementById("main-content").innerHTML=h.routes[h.currentRoute];const a=htmx.values(t);this.close(),htmx.ajax("POST","/implementations/categories/?delete=1",{values:a,target:"#main-content"}).then(()=>{$.fetchLatest()})}}class J{constructor(){this.dataFields={}}setDataField(t,a){this.dataFields[t]=a}}class j{constructor(){this.formFields={}}setFormField(t,a){this.formFields[t]=a}}class ge extends S{constructor(t,a){super(t),this.df=a}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields;s.name.textContent=a.name,s.price.textContent=`GHS ${a.price.toFixed(2)}`,s.category.textContent=a.category?a.category.name:"None",s.description.textContent=a.description||"No description",this.open()}}class ve extends S{constructor(t,a,s){super(t),this.df=a,this.ff=s}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields,r=this.ff.formFields;s.name.textContent=a.name,s.price.textContent=`GHS ${a.price.toFixed(2)}`,s.category.textContent=a.category?a.category.name:"None",s.description.textContent=a.description||"No description",r.id.value=a.id.toString(),r.date.value=a.date,this.open()}submitForm(){const t=document.getElementById("delete-product-form"),a=htmx.values(t),s=htmx.find(`#product-${a.id}`),r=htmx.closest(s,".record");r.querySelector(".skeleton").classList.remove("hidden"),this.close(),htmx.ajax("POST","/implementations/dashboard/?delete=1",{values:a,target:r,swap:"outerHTML"})}}class ye extends S{constructor(t,a){super(t),this.ff=a}setDetails(t){const a=JSON.parse(t),s=this.ff.formFields,r=a.price.toString().split(".");s.name.value=a.name,s.cedis.value=r[0],console.log(r),a.category&&(s.category.value=a.category.id.toString()),r.length==2?s.pesewas.value=r[1].length==2?r[1]:r[1]+"0":s.pesewas.value="00",s.id.value=a.id.toString(),s.description.value=a.description,s.date.value=a.date,this.setCategory(a.category),et.getInstance("edit-product-date").setDate(a.date),this.open()}setCategory(t){const a=G.getInstance("categories-edit-product");t?a.select(t):a.select({id:null,name:"None"})}submitForm(){const t=document.getElementById("edit-product-form");if(t.checkValidity()){const a=htmx.values(t),s=htmx.find(`#product-${a.id}`),r=htmx.closest(s,".record");r.querySelector(".skeleton").classList.remove("hidden"),this.close(),htmx.ajax("POST","/implementations/dashboard/?edit=1",{values:a,target:r,swap:"outerHTML"}).then(()=>{$.fetchLatest()})}else t.reportValidity()}}class we extends S{constructor(t,a){super(t),this.df=a}setDetails(t){const a=JSON.parse(t),s=this.df.dataFields;s.name.textContent=a.name,s.product_count.textContent=a.product_count.toString(),s.description.textContent=a.description||"No description",this.open()}}class _e extends S{constructor(t,a){super(t),this.ff=a}async submitForm(){const t=document.getElementById("search-form");if(t.checkValidity()){this.close(),h.navigate("/search/");const a=htmx.values(t);htmx.ajax("GET","/components/search/",{values:a,target:"#main-content"}),t.reset()}else t.reportValidity()}}const ke=(()=>{let e;return()=>{if(e)return e;const t=new j;return e=new _e("search-modal",t),e}})(),Se=(()=>{let e;return()=>e||(e=new he("add-product-modal"),e)})(),be=(()=>{let e;return()=>e||(e=new pe("add-category-modal"),e)})(),xe=(()=>{let e;return()=>{if(e)return e;const t=new J,a=new j;return e=new ve("delete-product-modal",t,a),e}})(),Me=(()=>{let e;return()=>{if(e)return e;const t=new J;return e=new ge("show-details-modal",t),e}})(),Ce=(()=>{let e;return()=>{if(e)return e;const t=new j;return e=new ye("edit-product-modal",t),e}})(),De=(()=>{let e;return()=>{if(e)return e;const t=new J;return e=new we("category-details-modal",t),e}})(),Ee=(()=>{let e;return()=>{if(e)return e;const t=new J,a=new j;return e=new fe("delete-category-modal",t,a),e}})(),Oe=(()=>{let e;return()=>{if(e)return e;const t=new j;return e=new me("edit-category-modal",t),e}})();function at(){localStorage.getItem("modalOpen")?(localStorage.removeItem("modalOpen"),localStorage.setItem("forwarded","true"),history.forward()):localStorage.getItem("forwarded")&&A.currentlyOpenModal.close()}window.getAddProductModal=Se;window.getDeleteProductModal=xe;window.getShowDetailsModal=Me;window.getEditProductModal=Ce;window.getCategoryDetailsModal=De;window.getAddCategoryModal=be;window.getDeleteCategoryModal=Ee;window.getEditCategoryModal=Oe;window.getSearchModal=ke;window.handleCloseModal=at;window.modalManager=A;class st extends Qt{createRenderRoot(){return this}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rt=e=>(t,a)=>{a!==void 0?a.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $e={attribute:!0,type:String,converter:Zt,reflect:!1,hasChanged:Yt},Ie=(e=$e,t,a)=>{const{kind:s,metadata:r}=a;let o=globalThis.litPropertyMetadata.get(r);if(o===void 0&&globalThis.litPropertyMetadata.set(r,o=new Map),s==="setter"&&((e=Object.create(e)).wrapped=!0),o.set(a.name,e),s==="accessor"){const{name:c}=a;return{set(i){const m=t.get.call(this);t.set.call(this,i),this.requestUpdate(c,m,e)},init(i){return i!==void 0&&this.C(c,void 0,e,i),i}}}if(s==="setter"){const{name:c}=a;return function(i){const m=this[c];t.call(this,i),this.requestUpdate(c,m,e)}}throw Error("Unsupported decorator location: "+s)};function W(e){return(t,a)=>typeof a=="object"?Ie(e,t,a):((s,r,o)=>{const c=r.hasOwnProperty(o);return r.constructor.createProperty(o,s),c?Object.getOwnPropertyDescriptor(r,o):void 0})(e,t,a)}var Pe=Object.create,nt=Object.defineProperty,Te=Object.getOwnPropertyDescriptor,Tt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),I=e=>{throw TypeError(e)},Fe=(e,t,a)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,wt=(e,t)=>nt(e,"name",{value:t,configurable:!0}),Le=e=>[,,,Pe(e?.[Tt("metadata")]??null)],Ft=["class","method","getter","setter","accessor","field","value","get","set"],L=e=>e!==void 0&&typeof e!="function"?I("Function expected"):e,Be=(e,t,a,s,r)=>({kind:Ft[e],name:t,metadata:s,addInitializer:o=>a._?I("Already initialized"):r.push(L(o||null))}),He=(e,t)=>Fe(t,Tt("metadata"),e[3]),B=(e,t,a,s)=>{for(var r=0,o=e[t>>1],c=o&&o.length;r<c;r++)t&1?o[r].call(a):s=o[r].call(a,s);return s},ot=(e,t,a,s,r,o)=>{var c,i,m,p,f,n=t&7,g=!!(t&8),u=!!(t&16),v=n>3?e.length+1:n?g?1:2:0,b=Ft[n+5],x=n>3&&(e[v-1]=[]),F=e[v]||(e[v]=[]),l=n&&(!u&&!g&&(r=r.prototype),n<5&&(n>3||!u)&&Te(n<4?r:{get[a](){return _t(this,o)},set[a](d){return St(this,o,d)}},a));n?u&&n<4&&wt(o,(n>2?"set ":n>1?"get ":"")+a):wt(r,a);for(var y=s.length-1;y>=0;y--)p=Be(n,a,m={},e[3],F),n&&(p.static=g,p.private=u,f=p.access={has:u?d=>Ne(r,d):d=>a in d},n^3&&(f.get=u?d=>(n^1?_t:ze)(d,r,n^4?o:l.get):d=>d[a]),n>2&&(f.set=u?(d,w)=>St(d,r,w,n^4?o:l.set):(d,w)=>d[a]=w)),i=(0,s[y])(n?n<4?u?o:l[b]:n>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,n^4||i===void 0?L(i)&&(n>4?x.unshift(i):n?u?o=i:l[b]=i:r=i):typeof i!="object"||i===null?I("Object expected"):(L(c=i.get)&&(l.get=c),L(c=i.set)&&(l.set=c),L(c=i.init)&&x.unshift(c));return n||He(e,r),l&&nt(r,a,l),u?n^4?o:l:r},it=(e,t,a)=>t.has(e)||I("Cannot "+a),Ne=(e,t)=>Object(t)!==t?I('Cannot use the "in" operator on this value'):e.has(t),_t=(e,t,a)=>(it(e,t,"read from private field"),a?a.call(e):t.get(e)),kt=(e,t,a)=>t.has(e)?I("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),St=(e,t,a,s)=>(it(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),ze=(e,t,a)=>(it(e,t,"access private method"),a),Lt,Bt,K,Ht,_,dt,ct;const D={data:void 0,useCachedData:!1};Ht=[rt("weeks-records")];class R extends(K=st,Bt=[W({type:Array})],Lt=[W({type:Boolean})],K){constructor(){super(...arguments),kt(this,dt,B(_,8,this,[])),B(_,11,this),kt(this,ct,B(_,12,this,!1)),B(_,15,this)}async fetchData(){if(D.useCachedData&&D.data)this.data=D.data,D.useCachedData=!1;else{const a=await(await fetch("/api/weekly-spendings/")).json();this.data=a,D.data=this.data}this.ready=!0}populateData(t){return t.map(s=>M`
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200 link" 
                @click=${()=>$t.viewWeek(s.id,`${s.week_start} - ${s.week_end}`)}                
                >    
                ${s.week_start} - ${s.week_end}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">
                    GHS ${s.total_amount}
                </td>
            </tr>
        `)}skeletonRows(t){const a=[];for(let s=0;s<t;s++)a.push(M`
                <tr>
                   <td class="px-6 py-4">
                      <div class="h-4 w-32 record-skeleton"></div>
                    </td>
                   <td class="px-6 py-4">
                      <div class="h-4 w-12 record-skeleton"></div>
                    </td>
                </tr>
            `);return a}connectedCallback(){super.connectedCallback(),this.fetchData()}render(){return M`
        <div class="p-4 bg-gray-50 dark:bg-dark2 dark:border-darkborder rounded-md border relative record">
            <h3 class="p-2  tracking-tight border-b dark:border-darkborder text-gray-900 dark:text-gray-300">
            <div class="flex items-center justify-between">
                <div class="text-xl font-bold">
                <!-- {{date|timesince}} -->
                </div>
            </div>   
            <div class="text-sm text-gray-500 dark:text-gray-400 font-medium my-2">
                <!-- {{ date | dateOnly}} -->
            </div>
            </h3>
        
    <div class="flex flex-col">
        <div class="-m-1.5 overflow-x-auto">
          <div class="p-1.5 min-w-full inline-block align-middle">
            <div class="overflow-hidden">
              <table class="min-w-full divide-y dark:divide-gray-100/5">
                <thead>
                  <tr>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Week</th>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Total</th>
                  </tr>
                </thead>
                <tbody class="divide-y dark:divide-gray-100/5">
                    ${this.ready?M`${this.populateData(this.data)}`:M`${this.skeletonRows(5)}`}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
 </div>
        `}}_=Le(K);dt=new WeakMap;ct=new WeakMap;ot(_,4,"data",Bt,R,dt);ot(_,4,"ready",Lt,R,ct);R=ot(_,0,"WeeksRecords",Ht,R);B(_,1,R);/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=([e,t,a])=>{const s=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach(r=>{s.setAttribute(r,String(t[r]))}),a?.length&&a.forEach(r=>{const o=Nt(r);s.appendChild(o)}),s},We=(e,t={})=>{const a="svg",s={...Ae,...t};return Nt([a,s,e])};/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];var Ve=Object.create,lt=Object.defineProperty,je=Object.getOwnPropertyDescriptor,zt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),P=e=>{throw TypeError(e)},Ge=(e,t,a)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,bt=(e,t)=>lt(e,"name",{value:t,configurable:!0}),qe=e=>[,,,Ve(e?.[zt("metadata")]??null)],At=["class","method","getter","setter","accessor","field","value","get","set"],H=e=>e!==void 0&&typeof e!="function"?P("Function expected"):e,Je=(e,t,a,s,r)=>({kind:At[e],name:t,metadata:s,addInitializer:o=>a._?P("Already initialized"):r.push(H(o||null))}),Ue=(e,t)=>Ge(t,zt("metadata"),e[3]),N=(e,t,a,s)=>{for(var r=0,o=e[t>>1],c=o&&o.length;r<c;r++)t&1?o[r].call(a):s=o[r].call(a,s);return s},ut=(e,t,a,s,r,o)=>{var c,i,m,p,f,n=t&7,g=!!(t&8),u=!!(t&16),v=n>3?e.length+1:n?g?1:2:0,b=At[n+5],x=n>3&&(e[v-1]=[]),F=e[v]||(e[v]=[]),l=n&&(!u&&!g&&(r=r.prototype),n<5&&(n>3||!u)&&je(n<4?r:{get[a](){return xt(this,o)},set[a](d){return Ct(this,o,d)}},a));n?u&&n<4&&bt(o,(n>2?"set ":n>1?"get ":"")+a):bt(r,a);for(var y=s.length-1;y>=0;y--)p=Je(n,a,m={},e[3],F),n&&(p.static=g,p.private=u,f=p.access={has:u?d=>Xe(r,d):d=>a in d},n^3&&(f.get=u?d=>(n^1?xt:Ke)(d,r,n^4?o:l.get):d=>d[a]),n>2&&(f.set=u?(d,w)=>Ct(d,r,w,n^4?o:l.set):(d,w)=>d[a]=w)),i=(0,s[y])(n?n<4?u?o:l[b]:n>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,n^4||i===void 0?H(i)&&(n>4?x.unshift(i):n?u?o=i:l[b]=i:r=i):typeof i!="object"||i===null?P("Object expected"):(H(c=i.get)&&(l.get=c),H(c=i.set)&&(l.set=c),H(c=i.init)&&x.unshift(c));return n||Ue(e,r),l&&lt(r,a,l),u?n^4?o:l:r},ht=(e,t,a)=>t.has(e)||P("Cannot "+a),Xe=(e,t)=>Object(t)!==t?P('Cannot use the "in" operator on this value'):e.has(t),xt=(e,t,a)=>(ht(e,t,"read from private field"),a?a.call(e):t.get(e)),Mt=(e,t,a)=>t.has(e)?P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Ct=(e,t,a,s)=>(ht(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),Ke=(e,t,a)=>(ht(e,t,"access private method"),a),Wt,Rt,Q,Vt,k,pt,mt;const E={data:void 0,useCachedData:!1};Vt=[rt("weeks-chart")];class V extends(Q=st,Rt=[W({type:Array})],Wt=[W({type:Boolean})],Q){constructor(){super(...arguments),Mt(this,pt,N(k,8,this,[])),N(k,11,this),Mt(this,mt,N(k,12,this,!1)),N(k,15,this),this.chart=null,this.observer=null}tooltipFormatter(t,{dataPointIndex:a}){return this.data.map(r=>`${r.week_start} - ${r.week_end}`)[a]}getToolTipOptions(){return{theme:this.getisDark()?"dark":"light",style:{fontFamily:"Poppins-Regular"},x:{formatter:this.tooltipFormatter.bind(this)}}}getLabelsStyleOptions(){return{colors:this.getisDark()?"#9ca3af":"#1f2937",fontFamily:"Poppins-Regular"}}getisDark(){return document.documentElement.classList.contains("dark")}renderChart(){const t={chart:{type:"line",toolbar:{show:!1},zoom:{enabled:!1}},stroke:{curve:"smooth",width:1},series:[{name:"Weekly Spendings",data:this.data.map(s=>s.total_amount)}],xaxis:{labels:{style:this.getLabelsStyleOptions()}},yaxis:{labels:{style:this.getLabelsStyleOptions()}},tooltip:this.getToolTipOptions()},a=this.querySelector("#chart");a&&(this.chart=new te(a,t),this.chart.render())}updateColors(){this.chart&&this.chart.updateOptions({xaxis:{labels:{style:this.getLabelsStyleOptions()}},yaxis:{labels:{style:this.getLabelsStyleOptions()}},tooltip:this.getToolTipOptions()})}async fetchData(){if(E.useCachedData||E.data)this.data=E.data,E.useCachedData=!1;else{const t=await tt("/api/weekly-spendings/?limit=10");this.data=t.sort((a,s)=>new Date(a.week_start).getTime()-new Date(s.week_start).getTime()),E.data=this.data}this.chart.updateSeries([{name:"Weekly Spendings",data:this.data.map(t=>t.total_amount)}]),this.ready=!0}firstUpdated(){this.renderChart(),this.fetchData(),this.observer=new MutationObserver(()=>{this.updateColors()}),this.observer.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}disconnectedCallback(){super.disconnectedCallback(),this.observer&&this.observer.disconnect(),this.chart&&this.chart.destroy()}render(){return We(Re,{color:"#888",size:40,class:"lucide lucide-loader animate-spin"}).outerHTML,M`
    <div style="position:relative;">
        ${this.ready?null:M`
          <div style="
            position:absolute;
            inset:0;
            display:flex;
            align-items:center;
            justify-content:center;
            z-index:10;
          ">
            ${ee`
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="#888" size="40" class="lucide lucide-loader animate-spin"><path d="M12 2v4"></path><path d="m16.2 7.8 2.9-2.9"></path><path d="M18 12h4"></path><path d="m16.2 16.2 2.9 2.9"></path><path d="M12 18v4"></path><path d="m4.9 19.1 2.9-2.9"></path><path d="M2 12h4"></path><path d="m4.9 4.9 2.9 2.9"></path></svg>
                `}
          </div>
        `}
        <div id="chart"></div>
    </div>
    `}}k=qe(Q);pt=new WeakMap;mt=new WeakMap;ut(k,4,"data",Rt,V,pt);ut(k,4,"ready",Wt,V,mt);V=ut(k,0,"WeeksChart",Vt,V);N(k,1,V);function Qe(e){return{isOpen:!1,init(){A.createModal(e,this)},open(){this.isOpen=!0,this.toggleSideEffects(!this.isOpen),history.pushState(null,""),localStorage.setItem("modalOpen","true"),A.currentlyOpenModal=this},close(){this.isOpen=!1,this.toggleSideEffects(!this.isOpen),localStorage.removeItem("modalOpen"),localStorage.removeItem("forwarded")},toggleSideEffects(t){const a=document.getElementById("animated-backdrop"),s=document.body;a.classList.toggle("hidden",t),s.classList.toggle("overflow-hidden",!t)},handleClickOutside(t){t.target==t.currentTarget&&this.close()}}}function Ye(e){return{isOpen:!1,filtered:[],items:[],isFocused:!1,selected:{},submitProperty:"",newSearch:"",newCategory:{},none:{id:null,name:"None"},async init(){G.setInstance(e,this),$.subscribe(this);const t=await tt("/api/categories/");this.update(t),this.selected=this.none},update(t){this.items=[this.none,...t],this.filtered=[...this.items]},open(){this.isOpen=!0,this.isFocused=!0},close(){this.isOpen=!1,this.selected={...this.selected},this.filtered=[...this.items],this.isFocused=!1},filter(t){this.filtered=this.items.filter(a=>a.name.toLowerCase().includes(t.currentTarget.value.toLowerCase())),this.filtered.length==0&&(this.newSearch=t.currentTarget.value)},select(t){this.selected=t,this.isOpen=!1,this.filtered=[...this.items]}}}function Ze(e){return{calendar:void 0,field:void 0,options:{inputMode:!0,positionToInput:"center",styles:{calendar:"calendar",dateBtn:"vc-date__btn date-btn",date:"vc-date",month:"",year:"",yearsYear:"vc-years__year",monthsMonth:"vc-months__month"},onClickDate(t,a){const s=t.context.selectedDates[0];if(s){document.getElementById(e+"-value").value=s;const r=new Date(s);document.getElementById(e).value=r.toDateString()}}},init(){et.setInstance(e,this);const{Calendar:t}=window.VanillaCalendarPro;this.field=document.getElementById(e),this.calendar=new t(this.field,this.options),this.calendar.init(),this.setToday()},setDate(t){const a=new Date(t);this.field.value=a.toDateString();const s=a.toISOString().split("T")[0];document.getElementById(e+"-value").value=s,this.calendar.update()},setToday(){const t=new Date,a=t.toDateString();this.field.value=a,document.getElementById(e+"-value").value=t.toISOString().split("T")[0]}}}function jt(){C.data("baseModal",Qe),C.data("selectField",Ye),C.data("datePicker",Ze)}function ft(){It().hide(),window.initFlowbite()}function Gt(e){const t=window.location.pathname;e.state&&t in h.routes&&(t=="/weeks/"?(D.useCachedData=!0,document.getElementById("main-content").innerHTML=h.routes["/weeks/"],document.getElementById("pageHeading").textContent="Weeks"):(t=="/dashboard/"&&(E.useCachedData=!0),document.getElementById("main-content").innerHTML=e.state.html)),ft()}document.addEventListener("htmx:afterSettle",ft);document.addEventListener("alpine:init",jt);window.addEventListener("popstate",at);window.addEventListener("popstate",Gt);window.addEventListener("beforeunload",()=>{document.removeEventListener("alpine:init",jt),window.removeEventListener("popstate",at),window.removeEventListener("popstate",Gt),document.addEventListener("htmx:afterSettle",ft)});var ta=Object.create,gt=Object.defineProperty,ea=Object.getOwnPropertyDescriptor,qt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),T=e=>{throw TypeError(e)},aa=(e,t,a)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Dt=(e,t)=>gt(e,"name",{value:t,configurable:!0}),sa=e=>[,,,ta(e?.[qt("metadata")]??null)],Jt=["class","method","getter","setter","accessor","field","value","get","set"],z=e=>e!==void 0&&typeof e!="function"?T("Function expected"):e,ra=(e,t,a,s,r)=>({kind:Jt[e],name:t,metadata:s,addInitializer:o=>a._?T("Already initialized"):r.push(z(o||null))}),na=(e,t)=>aa(t,qt("metadata"),e[3]),Y=(e,t,a,s)=>{for(var r=0,o=e[t>>1],c=o&&o.length;r<c;r++)t&1?o[r].call(a):s=o[r].call(a,s);return s},Ut=(e,t,a,s,r,o)=>{var c,i,m,p,f,n=t&7,g=!!(t&8),u=!!(t&16),v=n>3?e.length+1:n?g?1:2:0,b=Jt[n+5],x=n>3&&(e[v-1]=[]),F=e[v]||(e[v]=[]),l=n&&(!u&&!g&&(r=r.prototype),n<5&&(n>3||!u)&&ea(n<4?r:{get[a](){return Et(this,o)},set[a](d){return Ot(this,o,d)}},a));n?u&&n<4&&Dt(o,(n>2?"set ":n>1?"get ":"")+a):Dt(r,a);for(var y=s.length-1;y>=0;y--)p=ra(n,a,m={},e[3],F),n&&(p.static=g,p.private=u,f=p.access={has:u?d=>oa(r,d):d=>a in d},n^3&&(f.get=u?d=>(n^1?Et:da)(d,r,n^4?o:l.get):d=>d[a]),n>2&&(f.set=u?(d,w)=>Ot(d,r,w,n^4?o:l.set):(d,w)=>d[a]=w)),i=(0,s[y])(n?n<4?u?o:l[b]:n>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,n^4||i===void 0?z(i)&&(n>4?x.unshift(i):n?u?o=i:l[b]=i:r=i):typeof i!="object"||i===null?T("Object expected"):(z(c=i.get)&&(l.get=c),z(c=i.set)&&(l.set=c),z(c=i.init)&&x.unshift(c));return n||na(e,r),l&&gt(r,a,l),u?n^4?o:l:r},vt=(e,t,a)=>t.has(e)||T("Cannot "+a),oa=(e,t)=>Object(t)!==t?T('Cannot use the "in" operator on this value'):e.has(t),Et=(e,t,a)=>(vt(e,t,"read from private field"),a?a.call(e):t.get(e)),ia=(e,t,a)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Ot=(e,t,a,s)=>(vt(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),da=(e,t,a)=>(vt(e,t,"access private method"),a),Xt,Z,Kt,O,yt;Kt=[rt("my-button")];class q extends(Z=st,Xt=[W({type:String})],Z){constructor(){super(...arguments),ia(this,yt,Y(O,8,this,"Click Me")),Y(O,11,this)}render(){return M`<button><slot>${this.label}</slot></button>`}}O=sa(Z);yt=new WeakMap;Ut(O,4,"label",Xt,q,yt);q=Ut(O,0,"MyButton",Kt,q);Y(O,1,q);window.Alpine=C;document.addEventListener("DOMContentLoaded",()=>{C.start()});
