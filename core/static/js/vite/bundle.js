import{m as C,i as Qt,f as Zt,u as te,a as ee,b as se,x as M,c as ae}from"./assets/vendor-Or1T7GUi.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();class re{constructor(){this.currentRoute=window.location.pathname}async init(){const s=await(await fetch("/routes/?all=1")).json();this.routes=s}navigate(t,s){history.replaceState({html:document.getElementById("main-content").innerHTML},""),history.pushState(null,"",s||t),this.currentRoute=s||t,htmx.swap("#main-content",this.routes[t],{swapStyle:"innerHTML",transition:!0}),window.scrollTo({top:0,behavior:"smooth"}),Tt().hide()}}class ne{constructor(t){this.router=t}dashboard(){this.router.navigate("/dashboard/"),Ft.currentType="weekly"}expenditures(){this.router.navigate("/all-expenditures/")}categories(){this.router.navigate("/categories/")}category(t){this.router.navigate("/categories/category-name/",`/categories/${t}/`),document.getElementById("pageHeading").textContent=t}viewWeek(t,s){t!=-1&&(U("week_id",t),this.router.navigate("viewWeekSkeleton",`/weeks/${t}/`),document.getElementById("pageHeading").textContent=`${s}`)}viewDay(t,s){U("date",t),U("seeDay","1"),this.router.navigate("seeDaySkeleton",`/days/${t}/`),document.getElementById("pageHeading").textContent=s}weeks(){this.router.navigate("/weeks/"),document.getElementById("pageHeading").textContent="Weeks"}}const h=new re,It=new ne(h);h.init();window.routes=It;let X={};const U=(e,t)=>{X[e]=t};async function tt(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){console.log("Error fetching data ",t)}}class oe{constructor(){this.subscribers=[]}async fetchLatest(){const t=await tt("/api/categories/");this.notifySubscribers(t)}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(s=>s!=t)}notifySubscribers(t){this.subscribers.forEach(s=>{s.update(t)})}}const $=new oe,Tt=(()=>{let e;return()=>e||(e=window.FlowbiteInstances._instances.Drawer["separator-sidebar"],e)})();function ie(e){return window.FlowbiteInstances._instances.Dropdown[e]}function de(){return decodeURIComponent(window.location.pathname.split("/").filter(e=>e!=="").pop())}function ce(){const e={...X};return X={},/^\/categories\/[^\/]+\/$/.test(h.currentRoute)?{categoryName:de(),oneCategory:1,...e}:e}class le{constructor(){this.currentType="weekly"}fetch(t){t!=this.currentType&&(this.currentType=t,document.getElementById("statSummary").outerHTML=h.routes["/statSummarySkeleton/"],htmx.ajax("GET","/components/statSummary/?type="+t,{target:"#statSummarySkeleton",swap:"outerHTML"}))}}const Ft=new le;window.getAdditionalParams=ce;window.statSummary=Ft;window.getDropdown=ie;(function(){let e;document.addEventListener("alpine:init",()=>{C.data("toast",()=>({open:!0,autoDismiss:e,show(){this.autoDismiss&&setTimeout(()=>{this.open=!1},2e3)}}))})})();class ue{constructor(){this.instances={}}getInstance(t){return this.instances[t]}setInstance(t,s){this.instances[t]=s}}const j=new ue;class he{constructor(){this.instances={}}getInstance(t){return this.instances[t]}setInstance(t,s){this.instances[t]=s}}const et=new he;(function(){document.addEventListener("alpine:init",()=>{C.data("themeToggler",()=>({dark:localStorage.getItem("dark")=="true",toggle(){this.dark=!this.dark,document.documentElement.classList.toggle("dark",this.dark),localStorage.setItem("dark",this.dark?"true":"false"),document.documentElement.setAttribute("data-theme",this.dark?"dark":"light")}}))})})();class pe{constructor(){this.modals={},this.currentlyOpenModal=null}createModal(t,s){this.modals[t]=s}getModal(t){return this.modals[t]}}const A=new pe;class S{constructor(t){this.modal=A.getModal(t)}open(){this.modal.open()}close(){this.modal.close()}}class me extends S{_showPageSkeleton(t){return/^\/categories\/[^\/]+\/$/.test(t)?document.getElementById("see-products").outerHTML=h.routes.seeProductsSkeleton:!(t in h.routes)||t=="/search/"?this._navigateToDashboard():document.getElementById("main-content").innerHTML=h.routes[t]}_getHTMXTarget(t){return/^\/categories\/[^\/]+\/$/.test(t)?"#see-products":t=="/all-expenditures/"?"#all-expenditures":"#main-content"}_navigateToDashboard(){document.getElementById("main-content").innerHTML=h.routes["/dashboard/"],history.pushState(null,"","/dashboard/"),h.currentRoute="/dashboard/"}_resetFormUI(t){t.reset(),j.getInstance("categories-add-product").select(j.getInstance("categories-add-product").none),et.getInstance("add-product-date").setToday()}_submitProductForm(t,s){const a=htmx.values(t);htmx.ajax("POST","/implementations/dashboard/",{values:a,target:s}).then(()=>{$.fetchLatest()})}submitForm(){const t=document.getElementById("add-product-form");if(t.checkValidity()){const s=window.location.pathname,a=this._getHTMXTarget(s);this._showPageSkeleton(s),this.close(),this._submitProductForm(t,a),this._resetFormUI(t)}else t.reportValidity()}}class ge extends S{submitForm(){const t=document.getElementById("add-category-form");if(t.checkValidity()){document.getElementById("main-content").innerHTML=h.routes[h.currentRoute],this.close();const s=htmx.values(t);htmx.ajax("POST","/implementations/categories/",{values:s,target:"#main-content"}).then(()=>{$.fetchLatest()}),t.reset()}else t.reportValidity()}}class fe extends S{constructor(t,s){super(t),this.ff=s}setDetails(t){const s=JSON.parse(t),a=this.ff.formFields;a.name.value=s.name,a.description.value=s.description?s.description:"",a.id.value=s.id.toString(),this.open()}submitForm(){const t=document.getElementById("edit-category-form");if(t.checkValidity()){document.getElementById("main-content").innerHTML=h.routes[h.currentRoute],this.close();const s=htmx.values(t);htmx.ajax("POST","/implementations/categories/?edit=1",{values:s,target:"#main-content"}).then(()=>{$.fetchLatest()}),t.reset()}else t.reportValidity()}}class ve extends S{constructor(t,s,a){super(t),this.df=s,this.ff=a}setDetails(t){const s=JSON.parse(t),a=this.df.dataFields,r=this.ff.formFields;a.name.textContent=s.name,r.id.value=s.id.toString(),this.open()}submitForm(){const t=document.getElementById("delete-category-form");document.getElementById("main-content").innerHTML=h.routes[h.currentRoute];const s=htmx.values(t);this.close(),htmx.ajax("POST","/implementations/categories/?delete=1",{values:s,target:"#main-content"}).then(()=>{$.fetchLatest()})}}class J{constructor(){this.dataFields={}}setDataField(t,s){this.dataFields[t]=s}}class V{constructor(){this.formFields={}}setFormField(t,s){this.formFields[t]=s}}class ye extends S{constructor(t,s){super(t),this.df=s}setDetails(t){const s=JSON.parse(t),a=this.df.dataFields;a.name.textContent=s.name,a.price.textContent=`GHS ${s.price.toFixed(2)}`,a.category.textContent=s.category?s.category.name:"None",a.description.textContent=s.description||"No description",this.open()}}class we extends S{constructor(t,s,a){super(t),this.df=s,this.ff=a}setDetails(t){const s=JSON.parse(t),a=this.df.dataFields,r=this.ff.formFields;a.name.textContent=s.name,a.price.textContent=`GHS ${s.price.toFixed(2)}`,a.category.textContent=s.category?s.category.name:"None",a.description.textContent=s.description||"No description",r.id.value=s.id.toString(),r.date.value=s.date,this.open()}submitForm(){const t=document.getElementById("delete-product-form"),s=htmx.values(t),a=htmx.find(`#product-${s.id}`),r=htmx.closest(a,".record");r.querySelector(".skeleton").classList.remove("hidden"),this.close(),htmx.ajax("POST","/implementations/dashboard/?delete=1",{values:s,target:r,swap:"outerHTML"})}}class _e extends S{constructor(t,s){super(t),this.ff=s}setDetails(t){const s=JSON.parse(t),a=this.ff.formFields,r=s.price.toString().split(".");a.name.value=s.name,a.cedis.value=r[0],console.log(r),s.category&&(a.category.value=s.category.id.toString()),r.length==2?a.pesewas.value=r[1].length==2?r[1]:r[1]+"0":a.pesewas.value="00",a.id.value=s.id.toString(),a.description.value=s.description,a.date.value=s.date,this.setCategory(s.category),et.getInstance("edit-product-date").setDate(s.date),this.open()}setCategory(t){const s=j.getInstance("categories-edit-product");t?s.select(t):s.select({id:null,name:"None"})}submitForm(){const t=document.getElementById("edit-product-form");if(t.checkValidity()){const s=htmx.values(t),a=htmx.find(`#product-${s.id}`),r=htmx.closest(a,".record");r.querySelector(".skeleton").classList.remove("hidden"),this.close(),htmx.ajax("POST","/implementations/dashboard/?edit=1",{values:s,target:r,swap:"outerHTML"}).then(()=>{$.fetchLatest()})}else t.reportValidity()}}class ke extends S{constructor(t,s){super(t),this.df=s}setDetails(t){const s=JSON.parse(t),a=this.df.dataFields;a.name.textContent=s.name,a.product_count.textContent=s.product_count.toString(),a.description.textContent=s.description||"No description",this.open()}}class Se extends S{constructor(t,s){super(t),this.ff=s}async submitForm(){const t=document.getElementById("search-form");if(t.checkValidity()){this.close(),h.navigate("/search/");const s=htmx.values(t);htmx.ajax("GET","/components/search/",{values:s,target:"#main-content"}),t.reset()}else t.reportValidity()}}const be=(()=>{let e;return()=>{if(e)return e;const t=new V;return e=new Se("search-modal",t),e}})(),xe=(()=>{let e;return()=>e||(e=new me("add-product-modal"),e)})(),Me=(()=>{let e;return()=>e||(e=new ge("add-category-modal"),e)})(),Ce=(()=>{let e;return()=>{if(e)return e;const t=new J,s=new V;return e=new we("delete-product-modal",t,s),e}})(),De=(()=>{let e;return()=>{if(e)return e;const t=new J;return e=new ye("show-details-modal",t),e}})(),Oe=(()=>{let e;return()=>{if(e)return e;const t=new V;return e=new _e("edit-product-modal",t),e}})(),Ee=(()=>{let e;return()=>{if(e)return e;const t=new J;return e=new ke("category-details-modal",t),e}})(),$e=(()=>{let e;return()=>{if(e)return e;const t=new J,s=new V;return e=new ve("delete-category-modal",t,s),e}})(),Ie=(()=>{let e;return()=>{if(e)return e;const t=new V;return e=new fe("edit-category-modal",t),e}})();function st(){localStorage.getItem("modalOpen")?(localStorage.removeItem("modalOpen"),localStorage.setItem("forwarded","true"),history.forward()):localStorage.getItem("forwarded")&&A.currentlyOpenModal.close()}window.getAddProductModal=xe;window.getDeleteProductModal=Ce;window.getShowDetailsModal=De;window.getEditProductModal=Oe;window.getCategoryDetailsModal=Ee;window.getAddCategoryModal=Me;window.getDeleteCategoryModal=$e;window.getEditCategoryModal=Ie;window.getSearchModal=be;window.handleCloseModal=st;window.modalManager=A;class at extends Qt{createRenderRoot(){return this}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rt=e=>(t,s)=>{s!==void 0?s.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Te={attribute:!0,type:String,converter:te,reflect:!1,hasChanged:Zt},Fe=(e=Te,t,s)=>{const{kind:a,metadata:r}=s;let o=globalThis.litPropertyMetadata.get(r);if(o===void 0&&globalThis.litPropertyMetadata.set(r,o=new Map),a==="setter"&&((e=Object.create(e)).wrapped=!0),o.set(s.name,e),a==="accessor"){const{name:c}=s;return{set(i){const m=t.get.call(this);t.set.call(this,i),this.requestUpdate(c,m,e)},init(i){return i!==void 0&&this.C(c,void 0,e,i),i}}}if(a==="setter"){const{name:c}=s;return function(i){const m=this[c];t.call(this,i),this.requestUpdate(c,m,e)}}throw Error("Unsupported decorator location: "+a)};function W(e){return(t,s)=>typeof s=="object"?Fe(e,t,s):((a,r,o)=>{const c=r.hasOwnProperty(o);return r.constructor.createProperty(o,a),c?Object.getOwnPropertyDescriptor(r,o):void 0})(e,t,s)}/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=([e,t,s])=>{const a=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach(r=>{a.setAttribute(r,String(t[r]))}),s?.length&&s.forEach(r=>{const o=Pt(r);a.appendChild(o)}),a},Le=(e,t={})=>{const s="svg",a={...Pe,...t};return Pt([s,a,e])};/**
 * @license lucide v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];var He=Object.create,nt=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Lt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),I=e=>{throw TypeError(e)},ze=(e,t,s)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_t=(e,t)=>nt(e,"name",{value:t,configurable:!0}),Ae=e=>[,,,He(e?.[Lt("metadata")]??null)],Bt=["class","method","getter","setter","accessor","field","value","get","set"],L=e=>e!==void 0&&typeof e!="function"?I("Function expected"):e,We=(e,t,s,a,r)=>({kind:Bt[e],name:t,metadata:a,addInitializer:o=>s._?I("Already initialized"):r.push(L(o||null))}),Re=(e,t)=>ze(t,Lt("metadata"),e[3]),B=(e,t,s,a)=>{for(var r=0,o=e[t>>1],c=o&&o.length;r<c;r++)t&1?o[r].call(s):a=o[r].call(s,a);return a},ot=(e,t,s,a,r,o)=>{var c,i,m,p,g,n=t&7,f=!!(t&8),u=!!(t&16),v=n>3?e.length+1:n?f?1:2:0,b=Bt[n+5],x=n>3&&(e[v-1]=[]),P=e[v]||(e[v]=[]),l=n&&(!u&&!f&&(r=r.prototype),n<5&&(n>3||!u)&&Ne(n<4?r:{get[s](){return kt(this,o)},set[s](d){return bt(this,o,d)}},s));n?u&&n<4&&_t(o,(n>2?"set ":n>1?"get ":"")+s):_t(r,s);for(var y=a.length-1;y>=0;y--)p=We(n,s,m={},e[3],P),n&&(p.static=f,p.private=u,g=p.access={has:u?d=>Ge(r,d):d=>s in d},n^3&&(g.get=u?d=>(n^1?kt:Ve)(d,r,n^4?o:l.get):d=>d[s]),n>2&&(g.set=u?(d,w)=>bt(d,r,w,n^4?o:l.set):(d,w)=>d[s]=w)),i=(0,a[y])(n?n<4?u?o:l[b]:n>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,n^4||i===void 0?L(i)&&(n>4?x.unshift(i):n?u?o=i:l[b]=i:r=i):typeof i!="object"||i===null?I("Object expected"):(L(c=i.get)&&(l.get=c),L(c=i.set)&&(l.set=c),L(c=i.init)&&x.unshift(c));return n||Re(e,r),l&&nt(r,s,l),u?n^4?o:l:r},it=(e,t,s)=>t.has(e)||I("Cannot "+s),Ge=(e,t)=>Object(t)!==t?I('Cannot use the "in" operator on this value'):e.has(t),kt=(e,t,s)=>(it(e,t,"read from private field"),s?s.call(e):t.get(e)),St=(e,t,s)=>t.has(e)?I("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),bt=(e,t,s,a)=>(it(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),Ve=(e,t,s)=>(it(e,t,"access private method"),s),Ht,Nt,Y,zt,_,dt,ct;const D={data:void 0,useCachedData:!1};zt=[rt("weeks-chart")];class R extends(Y=at,Nt=[W({type:Array})],Ht=[W({type:Boolean})],Y){constructor(){super(...arguments),St(this,dt,B(_,8,this,[])),B(_,11,this),St(this,ct,B(_,12,this,!1)),B(_,15,this),this.chart=null,this.observer=null}tooltipFormatter(t,{dataPointIndex:s}){return this.data.map(r=>`${r.week_start} - ${r.week_end}`)[s]}getToolTipOptions(){return{theme:this.getisDark()?"dark":"light",style:{fontFamily:"Poppins-Regular"},x:{formatter:this.tooltipFormatter.bind(this)}}}getLabelsStyleOptions(){return{colors:this.getisDark()?"#9ca3af":"#1f2937",fontFamily:"Poppins-Regular"}}getGridOptions(){return{borderColor:this.getisDark()?"#f3f4f60d":"#e5e7eb"}}getisDark(){return document.documentElement.classList.contains("dark")}getXaxisOptions(){return{labels:{style:this.getLabelsStyleOptions()},axisBorder:{color:this.getisDark()?"#f3f4f60d":"#e5e7eb"},axisTicks:{color:this.getisDark()?"#f3f4f60d":"#e5e7eb"}}}getYaxisOptions(){return{labels:{style:this.getLabelsStyleOptions()}}}renderChart(){const t={chart:{type:"line",toolbar:{show:!1},zoom:{enabled:!1}},grid:this.getGridOptions(),stroke:{curve:"smooth",width:1},series:[{name:"Weekly Spendings",data:this.data.map(a=>a.total_amount)}],xaxis:this.getXaxisOptions(),yaxis:this.getYaxisOptions(),tooltip:this.getToolTipOptions()},s=this.querySelector("#chart");s&&(this.chart=new ee(s,t),this.chart.render())}updateColors(){this.chart&&this.chart.updateOptions({xaxis:this.getXaxisOptions(),yaxis:this.getYaxisOptions(),tooltip:this.getToolTipOptions(),grid:this.getGridOptions()})}async fetchData(){if(D.useCachedData&&D.data)this.data=D.data,D.useCachedData=!1;else{const t=await tt("/api/weekly-spendings/?limit=10");this.data=t.sort((s,a)=>new Date(s.week_start).getTime()-new Date(a.week_start).getTime()),D.data=this.data}this.chart.updateSeries([{name:"Weekly Spendings",data:this.data.map(t=>t.total_amount)}]),this.ready=!0}firstUpdated(){this.ready=!1,this.renderChart(),this.fetchData(),this.observer=new MutationObserver(()=>{this.updateColors()}),this.observer.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}disconnectedCallback(){super.disconnectedCallback(),this.observer&&this.observer.disconnect(),this.chart&&this.chart.destroy()}render(){return Le(Be,{color:"#888",size:40,class:"lucide lucide-loader animate-spin"}).outerHTML,M`
    <div style="position:relative;">
        ${this.ready?null:M`
          <div style="
            position:absolute;
            inset:0;
            display:flex;
            align-items:center;
            justify-content:center;
            z-index:10;
          ">
            ${se`
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" color="#888" size="40" class="lucide lucide-loader animate-spin stroke-blue-500"><path d="M12 2v4"></path><path d="m16.2 7.8 2.9-2.9"></path><path d="M18 12h4"></path><path d="m16.2 16.2 2.9 2.9"></path><path d="M12 18v4"></path><path d="m4.9 19.1 2.9-2.9"></path><path d="M2 12h4"></path><path d="m4.9 4.9 2.9 2.9"></path></svg>
                `}
          </div>
        `}
        <div id="chart"></div>
    </div>
    `}}_=Ae(Y);dt=new WeakMap;ct=new WeakMap;ot(_,4,"data",Nt,R,dt);ot(_,4,"ready",Ht,R,ct);R=ot(_,0,"WeeksChart",zt,R);B(_,1,R);var je=Object.create,lt=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,At=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),T=e=>{throw TypeError(e)},Je=(e,t,s)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,xt=(e,t)=>lt(e,"name",{value:t,configurable:!0}),Ue=e=>[,,,je(e?.[At("metadata")]??null)],Wt=["class","method","getter","setter","accessor","field","value","get","set"],H=e=>e!==void 0&&typeof e!="function"?T("Function expected"):e,Xe=(e,t,s,a,r)=>({kind:Wt[e],name:t,metadata:a,addInitializer:o=>s._?T("Already initialized"):r.push(H(o||null))}),Ye=(e,t)=>Je(t,At("metadata"),e[3]),N=(e,t,s,a)=>{for(var r=0,o=e[t>>1],c=o&&o.length;r<c;r++)t&1?o[r].call(s):a=o[r].call(s,a);return a},ut=(e,t,s,a,r,o)=>{var c,i,m,p,g,n=t&7,f=!!(t&8),u=!!(t&16),v=n>3?e.length+1:n?f?1:2:0,b=Wt[n+5],x=n>3&&(e[v-1]=[]),P=e[v]||(e[v]=[]),l=n&&(!u&&!f&&(r=r.prototype),n<5&&(n>3||!u)&&qe(n<4?r:{get[s](){return Mt(this,o)},set[s](d){return Dt(this,o,d)}},s));n?u&&n<4&&xt(o,(n>2?"set ":n>1?"get ":"")+s):xt(r,s);for(var y=a.length-1;y>=0;y--)p=Xe(n,s,m={},e[3],P),n&&(p.static=f,p.private=u,g=p.access={has:u?d=>Ke(r,d):d=>s in d},n^3&&(g.get=u?d=>(n^1?Mt:Qe)(d,r,n^4?o:l.get):d=>d[s]),n>2&&(g.set=u?(d,w)=>Dt(d,r,w,n^4?o:l.set):(d,w)=>d[s]=w)),i=(0,a[y])(n?n<4?u?o:l[b]:n>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,n^4||i===void 0?H(i)&&(n>4?x.unshift(i):n?u?o=i:l[b]=i:r=i):typeof i!="object"||i===null?T("Object expected"):(H(c=i.get)&&(l.get=c),H(c=i.set)&&(l.set=c),H(c=i.init)&&x.unshift(c));return n||Ye(e,r),l&&lt(r,s,l),u?n^4?o:l:r},ht=(e,t,s)=>t.has(e)||T("Cannot "+s),Ke=(e,t)=>Object(t)!==t?T('Cannot use the "in" operator on this value'):e.has(t),Mt=(e,t,s)=>(ht(e,t,"read from private field"),s?s.call(e):t.get(e)),Ct=(e,t,s)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),Dt=(e,t,s,a)=>(ht(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),Qe=(e,t,s)=>(ht(e,t,"access private method"),s),Rt,Gt,K,Vt,k,pt,mt;const O={data:void 0,useCachedData:!1};Vt=[rt("weeks-records")];class G extends(K=at,Gt=[W({type:Array})],Rt=[W({type:Boolean})],K){constructor(){super(...arguments),Ct(this,pt,N(k,8,this,[])),N(k,11,this),Ct(this,mt,N(k,12,this,!1)),N(k,15,this)}async fetchData(){if(O.useCachedData&&O.data)this.data=O.data,O.useCachedData=!1;else{const s=await(await fetch("/api/weekly-spendings/")).json();this.data=s,O.data=this.data}this.ready=!0}populateData(t){return t.map(a=>M`
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200 link" 
                @click=${()=>It.viewWeek(a.id,`${a.week_start} - ${a.week_end}`)}                
                >    
                ${a.week_start} - ${a.week_end}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">
                    GHS ${a.total_amount}
                </td>
            </tr>
        `)}skeletonRows(t){const s=[];for(let a=0;a<t;a++)s.push(M`
                <tr>
                   <td class="px-6 py-4">
                      <div class="h-4 w-32 record-skeleton"></div>
                    </td>
                   <td class="px-6 py-4">
                      <div class="h-4 w-12 record-skeleton"></div>
                    </td>
                </tr>
            `);return s}connectedCallback(){super.connectedCallback(),this.fetchData()}render(){return M`
        <div class="p-4 bg-gray-50 dark:bg-dark2 dark:border-darkborder rounded-md border relative record">
            <h3 class="p-2  tracking-tight border-b dark:border-darkborder text-gray-900 dark:text-gray-300">
            <div class="flex items-center justify-between">
                <div class="text-xl font-bold">
                <!-- {{date|timesince}} -->
                </div>
            </div>   
            <div class="text-sm text-gray-500 dark:text-gray-400 font-medium my-2">
                <!-- {{ date | dateOnly}} -->
            </div>
            </h3>
        
    <div class="flex flex-col">
        <div class="-m-1.5 overflow-x-auto">
          <div class="p-1.5 min-w-full inline-block align-middle">
            <div class="overflow-hidden">
              <table class="min-w-full divide-y dark:divide-gray-100/5">
                <thead>
                  <tr>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Week</th>
                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Total</th>
                  </tr>
                </thead>
                <tbody class="divide-y dark:divide-gray-100/5">
                    ${this.ready?M`${this.populateData(this.data)}`:M`${this.skeletonRows(5)}`}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
 </div>
        `}}k=Ue(K);pt=new WeakMap;mt=new WeakMap;ut(k,4,"data",Gt,G,pt);ut(k,4,"ready",Rt,G,mt);G=ut(k,0,"WeeksRecords",Vt,G);N(k,1,G);class Ze{constructor(){this.handlers={}}addHandler(t,s){this.handlers[t]?this.handlers[t].push(s):this.handlers[t]=[s]}handle(t,s){this.handlers[t]&&this.handlers[t].forEach(a=>a()),s.state&&t!="/weeks/"&&(document.getElementById("main-content").innerHTML=s.state.html)}}const gt=new Ze;gt.addHandler("/dashboard/",()=>{D.useCachedData=!0});gt.addHandler("/weeks/",()=>{O.useCachedData=!0,document.getElementById("main-content").innerHTML=h.routes["/weeks/"],document.getElementById("pageHeading").textContent="Weeks"});function ts(e){return{isOpen:!1,init(){A.createModal(e,this)},open(){this.isOpen=!0,this.toggleSideEffects(!this.isOpen),history.pushState(null,""),localStorage.setItem("modalOpen","true"),A.currentlyOpenModal=this},close(){this.isOpen=!1,this.toggleSideEffects(!this.isOpen),localStorage.removeItem("modalOpen"),localStorage.removeItem("forwarded")},toggleSideEffects(t){const s=document.getElementById("animated-backdrop"),a=document.body;s.classList.toggle("hidden",t),a.classList.toggle("overflow-hidden",!t)},handleClickOutside(t){t.target==t.currentTarget&&this.close()}}}function es(e){return{isOpen:!1,filtered:[],items:[],isFocused:!1,selected:{},submitProperty:"",newSearch:"",newCategory:{},none:{id:null,name:"None"},async init(){j.setInstance(e,this),$.subscribe(this);const t=await tt("/api/categories/");this.update(t),this.selected=this.none},update(t){this.items=[this.none,...t],this.filtered=[...this.items]},open(){this.isOpen=!0,this.isFocused=!0},close(){this.isOpen=!1,this.selected={...this.selected},this.filtered=[...this.items],this.isFocused=!1},filter(t){const s=t.currentTarget.value.toLowerCase();this.filtered=this.items.filter(a=>a.name.toLowerCase().includes(s)),this.filtered.length==0?(this.newSearch=t.currentTarget.value,this.newCategory={id:0,name:this.newSearch},this.select(this.newCategory)):this.open()},select(t){this.selected=t,this.isOpen=!1,this.filtered=[...this.items]}}}function ss(e){return{calendar:void 0,field:void 0,options:{inputMode:!0,positionToInput:"center",styles:{calendar:"calendar",dateBtn:"vc-date__btn date-btn",date:"vc-date",month:"",year:"",yearsYear:"vc-years__year",monthsMonth:"vc-months__month"},onClickDate(t,s){const a=t.context.selectedDates[0];if(a){document.getElementById(e+"-value").value=a;const r=new Date(a);document.getElementById(e).value=r.toDateString()}}},init(){et.setInstance(e,this);const{Calendar:t}=window.VanillaCalendarPro;this.field=document.getElementById(e),this.calendar=new t(this.field,this.options),this.calendar.init(),this.setToday()},setDate(t){const s=new Date(t);this.field.value=s.toDateString();const a=s.toISOString().split("T")[0];document.getElementById(e+"-value").value=a,this.calendar.update()},setToday(){const t=new Date,s=t.toDateString();this.field.value=s,document.getElementById(e+"-value").value=t.toISOString().split("T")[0]}}}function jt(){C.data("baseModal",ts),C.data("selectField",es),C.data("datePicker",ss)}function ft(){Tt().hide(),window.initFlowbite()}function qt(e){const t=window.location.pathname;t in h.routes&&gt.handle(t,e),ft()}document.addEventListener("htmx:afterSettle",ft);document.addEventListener("alpine:init",jt);window.addEventListener("popstate",st);window.addEventListener("popstate",qt);window.addEventListener("beforeunload",()=>{document.removeEventListener("alpine:init",jt),window.removeEventListener("popstate",st),window.removeEventListener("popstate",qt),document.addEventListener("htmx:afterSettle",ft)});var as=Object.create,vt=Object.defineProperty,rs=Object.getOwnPropertyDescriptor,Jt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),F=e=>{throw TypeError(e)},ns=(e,t,s)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ot=(e,t)=>vt(e,"name",{value:t,configurable:!0}),os=e=>[,,,as(e?.[Jt("metadata")]??null)],Ut=["class","method","getter","setter","accessor","field","value","get","set"],z=e=>e!==void 0&&typeof e!="function"?F("Function expected"):e,is=(e,t,s,a,r)=>({kind:Ut[e],name:t,metadata:a,addInitializer:o=>s._?F("Already initialized"):r.push(z(o||null))}),ds=(e,t)=>ns(t,Jt("metadata"),e[3]),Q=(e,t,s,a)=>{for(var r=0,o=e[t>>1],c=o&&o.length;r<c;r++)t&1?o[r].call(s):a=o[r].call(s,a);return a},Xt=(e,t,s,a,r,o)=>{var c,i,m,p,g,n=t&7,f=!!(t&8),u=!!(t&16),v=n>3?e.length+1:n?f?1:2:0,b=Ut[n+5],x=n>3&&(e[v-1]=[]),P=e[v]||(e[v]=[]),l=n&&(!u&&!f&&(r=r.prototype),n<5&&(n>3||!u)&&rs(n<4?r:{get[s](){return Et(this,o)},set[s](d){return $t(this,o,d)}},s));n?u&&n<4&&Ot(o,(n>2?"set ":n>1?"get ":"")+s):Ot(r,s);for(var y=a.length-1;y>=0;y--)p=is(n,s,m={},e[3],P),n&&(p.static=f,p.private=u,g=p.access={has:u?d=>cs(r,d):d=>s in d},n^3&&(g.get=u?d=>(n^1?Et:us)(d,r,n^4?o:l.get):d=>d[s]),n>2&&(g.set=u?(d,w)=>$t(d,r,w,n^4?o:l.set):(d,w)=>d[s]=w)),i=(0,a[y])(n?n<4?u?o:l[b]:n>4?void 0:{get:l.get,set:l.set}:r,p),m._=1,n^4||i===void 0?z(i)&&(n>4?x.unshift(i):n?u?o=i:l[b]=i:r=i):typeof i!="object"||i===null?F("Object expected"):(z(c=i.get)&&(l.get=c),z(c=i.set)&&(l.set=c),z(c=i.init)&&x.unshift(c));return n||ds(e,r),l&&vt(r,s,l),u?n^4?o:l:r},yt=(e,t,s)=>t.has(e)||F("Cannot "+s),cs=(e,t)=>Object(t)!==t?F('Cannot use the "in" operator on this value'):e.has(t),Et=(e,t,s)=>(yt(e,t,"read from private field"),s?s.call(e):t.get(e)),ls=(e,t,s)=>t.has(e)?F("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),$t=(e,t,s,a)=>(yt(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),us=(e,t,s)=>(yt(e,t,"access private method"),s),Yt,Z,Kt,E,wt;Kt=[rt("my-button")];class q extends(Z=at,Yt=[W({type:String})],Z){constructor(){super(...arguments),ls(this,wt,Q(E,8,this,"Click Me")),Q(E,11,this)}render(){return M`<button><slot>${this.label}</slot></button>`}}E=os(Z);wt=new WeakMap;Xt(E,4,"label",Yt,q,wt);q=Xt(E,0,"MyButton",Kt,q);Q(E,1,q);window.Alpine=C;document.addEventListener("DOMContentLoaded",()=>{ae(),C.start()});
